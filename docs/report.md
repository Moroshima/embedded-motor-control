## 一、设计目的、任务、要求、课题内容

### （一）课程设计任务

本课程设计直流电机调速控制系统，并进行仿真和实验验证。具体内容包括：

1. 建立直流电机的数学建模，设计转速反馈单闭环直流调速系统并进行仿真验证； 
2. 设计系统硬件电路，完成硬件电路连接和测试；
3. 设计PID控制程序，实现电动机转速控制，给出不同参数下的系统输出变量变化曲线图，分析实验结果得出相关结论；
4. 实现下述功能：① 设置转速并实时显示当前转速；② 当转速达到设定转速时，绿色LED灯常亮；③当前转速与设定转速波动大于5%时，异常报警。
5. 分析系统在突然起动、突加负载、突减负载等条件下的电机动态特性。

### （二）课程设计内容

1. 被控对象数学建模和MATLAB仿真

理解直流电动机的一般动态特性并建立数学模型，设计转速反馈单闭环直流调速系统并进行MATLAB仿真验证。

重点支撑毕业要求指标点2-3、3-1。

2. 系统硬件电路设计、连接和测试

完成单闭环直流调速系统的设计，包括系统方案的总体设计、硬件模块详细设计，并对硬件电路进行连接和测试。

重点支撑毕业要求指标点2-3、3-1。

3. 软件设计

完成单闭环直流调速系统的软件设计，包括转速检测模块、PWM驱动模块、PID控制模块等。

重点支撑毕业要求指标点2-3、3-1。

4. 系统调试

对转速控制进行调试，满足各项性能指标，使实验结果达到设计要求。

重点支撑毕业要求指标点2-3、3-1。

5. 电机动态特性分析

在突然启动、突加负载、突减负载条件下测量电动机的转速、电流，并分析直流调速系统的动态性能。 

重点支撑毕业要求指标点2-3，3-1。

6. 验收答辩

现场验收答辩要点包括阐述设计思想、设计内容、调试过程、分析结果并回答问题。

### （三）主要仪器设备

**硬件：**示波器、万用表、计算机、ARM开发平台、光电编码器、直流电机、电动机驱动模块、阻尼载荷等。

**软件**：MATLAB及Keil C集成开发环境。

## 三、设计和实现

### （一）建模仿真

使用 MATLAB Simulink 对本课程设计所对应的比例积分控制的直流调速系统进行仿真：

![Snipaste_2023-04-20_15-21-07](./assets/Snipaste_2023-04-20_15-21-07.png)

使用 PI 控制之后的效果：

![Scope](./assets/Scope.png)

### （二）硬件设计

硬件部分主要由 STM32F401CDUx 核心板、底板、OLED 显示模块与直流减速电机组成。

底板以基于 ARM Cortex-M4F 为核心的 STM32F401 微控制器作为核心，工作频率高达 84 Mhz，具有浮点单元 FPU，DSP加速指令集。集成 UART、I2C、SPI、USB、I2S 等多种通信外设，同时片上集成速度高达 2.4 MSPS 的12位 ADC，可以满足高性能能控制系统的设计与实现。

同时底板还集成了温度测量单元，直流电机驱动，以及 Buck 单元，可以进行过程控制、运动控制等相关领域复杂工程的设计与验证。

其中直流电机部分用于设计以及验证运动控制系统，以及计算机控制理论，支持验证PID及其改进型等多种控制方法，电机集成正交编码器用于实现速度位置双闭环控制。使用 MATLAB 对实物建模后进行仿真，同时在实物验证运行。

Buck单元用于验证二阶系统的动态响应及其反馈控制器，可以验证PID算法以及超前-滞后补偿器（Lead-Lag Compensator）。使用 MATLAB 对实物建模后进行控制算法验证，同时在实物验证运行。

![photo_2023-04-21_10-26-13](./assets/photo_2023-04-21_10-26-13.jpg)

### （三）单片机代码实现

见附录

四、测试和结果

（一）不同参数下的系统输出变量变化曲线

（二）单片机功能实现

（1）转速设置与实时转速显示

（2）当转速达到设定转速时，绿色LED灯常亮

（3）异常报警

（三）电机动态特性分析

五、课题结果分析

六、课题中遇到的问题及实际心得

七、参考文献
[1] 阮毅,陈伯时.电力拖动自动控制系统[M].机械工业出版社,2015年
[2] 顾亦然,张腾飞等.嵌入式系统及应用[M].南京邮电大学,2009年
[3] 廖义奎. Cortex-M3之STM32嵌入式系统设计[M].中国电力出版社, 2012年
[4] 刘景林，罗玲，付朝阳 .电机及拖动基础[M].化学工业出版社,2011年
[5] 中国国家标准化管理委员会.直流电机试验方法[M].中国标准出版社,2009年
[6] 丁文龙.ARM 嵌入式系统基础与开发教程[M].北京大学出版社,2010年